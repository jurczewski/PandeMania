(this.webpackJsonppandemania=this.webpackJsonppandemania||[]).push([[0],{117:function(e,t,n){},119:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var r,c=n(3),a=n(0),o=n.n(a),i=n(14),s=n.n(i),u=n(49),l=n(17),d=n(31),j=n(27),h=n(9),f=(n(52),{user:null,fetched:!1,country:"",setUser:function(){}}),b=o.a.createContext(f),p=(n(138),{apiKey:"AIzaSyCGg--7lUP9qUJxPQUHmTyfkzZhW3AHsT8",authDomain:"pandemania-d9690.firebaseapp.com",projectId:"pandemania-d9690",storageBucket:"pandemania-d9690.appspot.com",messagingSenderId:"404379003612",appId:"1:404379003612:web:4a1c9b3218bfdf46d0a219"}),O={user:null,fetched:!1,country:""},m=function(e){var t=e.children,n=Object(a.useState)(O),o=Object(j.a)(n,2),i=o[0],s=o[1];return Object(a.useEffect)((function(){h.a.auth().onAuthStateChanged((function(e){var t;e&&(t=e.uid,r.collection("users").doc(t).get().then((function(e){return e.exists?e.data().country:""})).catch((function(e){console.error("Error getting data for user:",e)}))).then((function(t){s({user:e,fetched:!0,country:t})}))}))}),[]),Object(c.jsx)(b.Provider,{value:Object(d.a)(Object(d.a)({},i),{},{setUser:s}),children:t})},v=function(e){var t=e.path,n=e.children,r=Object(a.useContext)(b);return r.fetched?null!==r.user?Object(c.jsx)(l.b,{path:t,children:n}):Object(c.jsx)(l.a,{to:"/"}):null},x=(n(117),n(18)),g=n.n(x),y=n(23),w=n(82),k=n.n(w),C=n(40),N=n.n(C),S=n(139),I=n(182),L=function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",fetch("".concat("https://api.covid19api.com/country/").concat(t)).then((function(e){return e.ok?e.json():[]})).then((function(e){return e.map((function(e){return{id:e.ID,country:e.Country,confirmed:e.Confirmed,recovered:e.Recovered,deaths:e.Deaths,active:e.Active,date:Date.parse(e.Date)}}))})));case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",console.warn(e.t0));case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}(),E=(n(119),"area-datetime"),z=Object.freeze({ONE_MONTH:"one_month",SIX_MONTH:"six_months",ONE_YEAR:"one_year",YTD:"ytd",ALL:"all"}),A={series:[{data:[[(new Date).getTime(),0]]}],options:{chart:{id:E,zoom:{autoScaleYaxis:!0}},theme:{mode:"dark"},dataLabels:{enabled:!1},xaxis:{type:"datetime"},tooltip:{x:{format:"dd MMM yyyy"}}},selection:z.ALL},T=function(e){var t=e.countryName,n=Object(a.useState)(A),r=Object(j.a)(n,2),o=r[0],i=r[1];Object(a.useEffect)((function(){s()}),[t]);var s=function(){var e=Object(y.a)(g.a.mark((function e(){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:n=e.sent,r=[],"undefined"!==typeof n&&(r=[{name:"Confirmed cases",data:n.map((function(e){return[e.date,e.confirmed]}))},{name:"Recovered cases",data:n.map((function(e){return[e.date,e.recovered]}))}],i(Object(d.a)(Object(d.a)({},o),{},{series:r})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=[{value:z.ONE_MONTH,label:"1M"},{value:z.SIX_MONTH,label:"6M"},{value:z.ONE_YEAR,label:"1Y"},{value:z.YTD,label:"YTD"},{value:z.ALL,label:"ALL"}];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(I.a,{className:"toolbar",children:u.map((function(e){return Object(c.jsx)(S.a,{variant:"contained",color:o.selection===e.value?"primary":"",onClick:function(){return function(e){var t,n=o.series[0].data,r=n.length-1;if(-1!==r)switch(i(Object(d.a)(Object(d.a)({},o),{},{selection:e})),e){case z.ONE_MONTH:t=31,N.a.exec(E,"zoomX",n[r-t][0],n[r][0]);break;case z.SIX_MONTH:t=186,N.a.exec(E,"zoomX",n[r-t][0],n[n.length-1][0]);break;case z.ONE_YEAR:t=365,N.a.exec(E,"zoomX",n[r-t][0],n[r][0]);break;case z.YTD:var c=new Date((new Date).getFullYear(),0,1);N.a.exec(E,"zoomX",c.getTime(),n[r][0]);break;case z.ALL:N.a.exec(E,"zoomX",n[0][0],n[r][0])}}(e.value)},className:o.selection===e.value?"active":"",children:e.label},e.value)}))}),Object(c.jsxs)("div",{className:"chart-wrapper",children:[0===o.series[0].data.length&&Object(c.jsx)("h2",{className:"chart-wrapper__header",children:"No data"}),Object(c.jsx)(k.a,{options:o.options,series:o.series,type:"area",height:500})]})]})},P=n(200),D=n(201),M=n(90),_=n(186),R=n(83),H=n.n(R),F=n(84),U=n.n(F),W=function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",fetch("https://api.covid19api.com/countries").then((function(e){return e.ok?e.json():[]})).then((function(e){return e.map((function(e){return{country:e.Country,slug:e.Slug,ISO2:e.ISO2}}))})));case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(y.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return n=e.sent,e.abrupt("return",n.find((function(e){return e.ISO2===t})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=Object.freeze({16:16,24:24,32:32,48:48,64:64}),X=Object.freeze({FLAT:"flat",SHINY:"shiny"}),V=function(e){var t=e.code,n=e.size,r=e.name,a=e.theme;return Object(c.jsx)("img",{src:"https://www.countryflags.io/".concat(t,"/").concat(a,"/").concat(n,".png"),alt:r})},J=V;V.defaultProps={code:"PL",size:B[16],name:"Poland",theme:X.FLAT};n(122);var G=Object(M.a)({palette:{type:"dark"}}),q=function(e){var t=e.setPickedCountry,n=Object(a.useState)([]),r=Object(j.a)(n,2),o=r[0],i=r[1];Object(a.useEffect)((function(){s()}),[]);var s=function(){var e=Object(y.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:t=e.sent,n=t.sort((function(e,t){return e.country.localeCompare(t.country)})),i(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)(_.a,{theme:G,children:Object(c.jsx)(D.a,{id:"highlights-demo",theme:G,style:{width:300},options:o,getOptionLabel:function(e){return e.country},onChange:function(e,n){return function(e){e&&t(e)}(n)},renderInput:function(e){return Object(c.jsx)(P.a,Object(d.a)(Object(d.a)({},e),{},{label:"Countries",variant:"outlined",margin:"normal"}))},renderOption:function(e,t){var n=t.inputValue,r=U()(e.country,n),a=H()(e.country,r);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(J,{code:e.ISO2,name:e.country}),a.map((function(e){return Object(c.jsx)("span",{style:{fontWeight:e.highlight?700:400},children:e.text},e.text)}))]})}})})},K=n(87),Q=n.n(K),Z=n(86),$=n.n(Z),ee=(n(123),{fontSize:"2rem"}),te=function(e){var t=e.isSet,n=e.onClick;return Object(c.jsx)("div",{className:"wrapper",children:t?Object(c.jsx)($.a,{onClick:n,className:"icon",style:ee}):Object(c.jsx)(Q.a,{onClick:n,className:"icon",style:ee})})};te.defaultProps={isSet:!1};var ne=te,re=n(190),ce=n(191),ae=n(193),oe=n(189),ie=n(192),se=n(140),ue=Object(M.a)({palette:{type:"dark"}}),le=[de("Confirmed",0),de("Deaths",0),de("Recovered",0),de("Active",0)];function de(e,t){return{name:e,number:t}}var je=function(e){var t=e.countryName,n=Object(a.useState)(le),r=Object(j.a)(n,2),o=r[0],i=r[1];Object(a.useEffect)((function(){s()}),[t]);var s=function(){var e=Object(y.a)(g.a.mark((function e(){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:0!==(n=e.sent).length?(r=n[n.length-1],i([de("Confirmed",r.confirmed),de("Deaths",r.deaths),de("Recovered",r.recovered),de("Active",r.active)])):i(le);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{style:{marginBottom:"1rem"},children:Object(c.jsx)(_.a,{theme:ue,children:Object(c.jsx)(oe.a,{component:se.a,children:Object(c.jsx)(re.a,{"aria-label":"country statistic",children:Object(c.jsx)(ce.a,{children:o.map((function(e){return Object(c.jsxs)(ie.a,{children:[Object(c.jsx)(ae.a,{component:"th",scope:"row",style:{fontWeight:"bold"},children:e.name}),Object(c.jsx)(ae.a,{align:"right",children:e.number})]},e.name)}))})})})})})},he=function(){var e=Object(a.useContext)(b),t=e.country,n=e.user,o=e.setUser,i=e.fetched,s=Object(a.useState)({slug:"poland",country:"Poland",ISO2:"PL"}),u=Object(j.a)(s,2),l=u[0],d=u[1];Object(a.useEffect)((function(){"undefined"!==typeof t&&""!==t&&Y(t).then((function(e){return d(e)}))}),[t]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("main",{children:[Object(c.jsxs)("p",{className:"title",children:["Cases and recoveries for whole country:",l&&Object(c.jsxs)("span",{className:"bold",children:[" ",l.country]}),Object(c.jsx)(J,{code:l.ISO2,size:24,name:l.country})]}),Object(c.jsxs)("div",{className:"picker",children:[Object(c.jsx)(q,{setPickedCountry:function(e){return d(e)}}),n&&Object(c.jsx)(ne,{onClick:function(){var e,t,c=n.uid;e=c,t=l.ISO2,r.collection("users").doc(e).set({country:t}).catch((function(e){console.error("Error writing document: ",e)})),o({user:n,fetched:i,country:l.ISO2})},isSet:l.ISO2===t})]}),Object(c.jsx)(T,{countryName:l.slug}),Object(c.jsx)(je,{countryName:l.slug})]})})},fe=n(88),be=n.n(fe),pe=n(194),Oe=(n(132),{signInFlow:"redirect",signInSuccessUrl:"/",signInOptions:[h.a.auth.GoogleAuthProvider.PROVIDER_ID,h.a.auth.EmailAuthProvider.PROVIDER_ID]}),me=function(){return Object(c.jsx)(pe.a,{maxWidth:"sm",className:"container",children:Object(c.jsxs)("div",{className:"paper",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h1",{children:"Choose sign-in option:"})}),Object(c.jsx)(be.a,{uiConfig:Oe,firebaseAuth:h.a.auth()})]})})},ve=function(){var e=Object(a.useContext)(b);return Object(a.useEffect)((function(){e.fetched&&h.a.auth().signOut().then((function(){return e.setUser({user:null,fetched:!1})}))})),Object(c.jsx)(l.a,{to:"/"})},xe=n(198),ge=n(196),ye=n(199),we=n(188),ke=n(94),Ce=function(e){var t=e.onClick;return Object(c.jsx)(we.a,{onClick:t,style:{marginLeft:"auto"},children:Object(c.jsx)(ke.a,{children:Object(c.jsx)("path",{d:"M11,7L9.6,8.4l2.6,2.6H2v2h10.2l-2.6,2.6L11,17l5-5L11,7z M20,19h-8v2h8c1.1,0,2-0.9,2-2V5c0-1.1-0.9-2-2-2h-8v2h8V19z"})})})},Ne=n(91),Se=n(202),Ie=n(197),Le=n(195),Ee=function(e){var t=e.onClick;return Object(c.jsxs)(Se.a,{onClick:t,children:[Object(c.jsx)(Le.a,{style:{width:"50%",color:"white"},children:Object(c.jsx)(ke.a,{children:Object(c.jsx)("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})})}),Object(c.jsx)(ge.a,{children:"Log out"})]})},ze=function(e){var t=e.onClick,n=e.displayName,r=e.country,o=Object(a.useState)(null),i=Object(j.a)(o,2),s=i[0],u=i[1],l=Object(a.useRef)();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(we.a,{ref:l,onClick:function(){return u(l.current)},children:Object(c.jsx)(ke.a,{children:Object(c.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"})})}),Object(c.jsxs)(Ne.a,{anchorEl:s,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(s),onClose:function(){return u(null)},children:[Object(c.jsx)(Se.a,{style:{backgroundColor:"transparent",cursor:"default"},disableRipple:!0,children:Object(c.jsxs)("span",{children:[Object(c.jsx)("b",{children:"Username: "}),n]})}),Object(c.jsxs)(Se.a,{style:{backgroundColor:"transparent",cursor:"default"},disableRipple:!0,children:[Object(c.jsx)("b",{style:{width:"55%"},children:"Country: "}),r?Object(c.jsx)(J,{code:r,size:24}):"No country set"]}),Object(c.jsx)(Ie.a,{style:{backgroundColor:"grey",marginTop:"1vh",marginBottom:"1vh"}}),Object(c.jsx)(Ee,{onClick:t})]})]})};ze.defaultProps={country:void 0};var Ae=ze,Te=(n(133),function(){var e=Object(l.g)(),t=Object(a.useContext)(b);return Object(c.jsx)(xe.a,{style:{backgroundColor:"#303046"},children:Object(c.jsxs)(ye.a,{children:[Object(c.jsx)("div",{className:"empty"}),Object(c.jsx)("div",{className:"navtitle",style:{textAlign:"center"},children:Object(c.jsx)(ge.a,{variant:"h6",onClick:function(){return e.push("/")},children:"PandeMania \ud83e\udda0"})}),Object(c.jsx)("div",{className:"actions",children:null==t.user?Object(c.jsx)(Ce,{onClick:function(){return e.push("/login")}}):Object(c.jsx)(Ae,{onClick:function(){return e.push("/logout")},displayName:t.user.displayName?t.user.displayName:t.user.email,country:t.country})})]})})});n(134);!function(){var e=h.a.initializeApp(p);r=h.a.firestore(e)}();var Pe=function(){return Object(c.jsx)(m,{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(u.a,{children:[Object(c.jsx)(Te,{}),Object(c.jsx)("div",{className:"content",children:Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{path:"/login",children:Object(c.jsx)(me,{})}),Object(c.jsx)(v,{path:"/logout",children:Object(c.jsx)(ve,{})}),Object(c.jsx)(l.b,{path:"/",children:Object(c.jsx)(he,{})})]})})]})})})};n(135),n(136);function De(){return(De=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){var e=document.getElementById("loader-wrapper");e.addEventListener("transitionend",(function(){e.style.display="none"}),!0),e.style.opacity=0}),1200);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Me=function(){return De.apply(this,arguments)},_e=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Re(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var He=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,203)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};s.a.render(Object(c.jsxs)(o.a.StrictMode,{children:[Object(c.jsx)("div",{id:"loader-wrapper",children:Object(c.jsx)("div",{id:"loader"})}),Object(c.jsx)(Pe,{})]}),document.getElementById("root"),Me),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");_e?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Re(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Re(t,e)}))}}(),He()}},[[137,1,2]]]);
//# sourceMappingURL=main.269421a9.chunk.js.map